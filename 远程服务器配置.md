# ğŸŒ è¿œç¨‹æœåŠ¡å™¨é…ç½®è¯´æ˜

## ğŸ“Š æœåŠ¡å™¨ä¿¡æ¯

- **MySQLæœåŠ¡å™¨**: 1.94.137.69:3306
  - ç”¨æˆ·å: root
  - å¯†ç : 123456
  - æ•°æ®åº“: image_convert_db

- **RedisæœåŠ¡å™¨**: 1.94.137.69:6379
  - å¯†ç : foobared
  - æ•°æ®åº“: 0

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨è¿œç¨‹å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
python remote_start.py
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨é€šç”¨å¯åŠ¨è„šæœ¬
```bash
# Windows
start.bat

# Linux/Mac
./start.sh
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨å¯åŠ¨
```bash
# 1. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 2. æµ‹è¯•è¿æ¥
python test_connection.py

# 3. åˆå§‹åŒ–æ•°æ®åº“
python init_db.py

# 4. å¯åŠ¨æœåŠ¡
python dev_start.py
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ•°æ®åº“é…ç½®
```python
# config.py
database_url = "mysql+pymysql://root:123456@1.94.137.69:3306/image_convert_db"
```

### Redisé…ç½®
```python
# config.py
redis_host = "1.94.137.69"
redis_port = 6379
redis_database = 0
redis_password = "foobared"
redis_url = "redis://:foobared@1.94.137.69:6379/0"
```

## ğŸ§ª è¿æ¥æµ‹è¯•

### æµ‹è¯•æ‰€æœ‰è¿æ¥
```bash
python test_connection.py
```

### å•ç‹¬æµ‹è¯•MySQL
```python
from sqlalchemy import create_engine, text
from config import settings

engine = create_engine(settings.database_url)
with engine.connect() as conn:
    result = conn.execute(text("SELECT VERSION()"))
    print(f"MySQLç‰ˆæœ¬: {result.scalar()}")
```

### å•ç‹¬æµ‹è¯•Redis
```python
from redis_client import get_redis

redis_client = get_redis()
if redis_client.ping():
    print("Redisè¿æ¥æˆåŠŸ")
else:
    print("Redisè¿æ¥å¤±è´¥")
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. è¿æ¥è¶…æ—¶
```bash
# æ£€æŸ¥ç½‘ç»œè¿æ¥
ping 1.94.137.69

# æ£€æŸ¥ç«¯å£æ˜¯å¦å¼€æ”¾
telnet 1.94.137.69 3306
telnet 1.94.137.69 6379
```

### 2. è®¤è¯å¤±è´¥
- æ£€æŸ¥ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
- ç¡®è®¤æœåŠ¡å™¨å…è®¸è¿œç¨‹è¿æ¥
- æ£€æŸ¥é˜²ç«å¢™è®¾ç½®

### 3. æ•°æ®åº“ä¸å­˜åœ¨
```sql
-- ç™»å½•MySQLåˆ›å»ºæ•°æ®åº“
mysql -h 1.94.137.69 -u root -p
CREATE DATABASE image_convert_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 4. æƒé™é—®é¢˜
```sql
-- ç¡®ä¿ç”¨æˆ·æœ‰è¿œç¨‹è¿æ¥æƒé™
GRANT ALL PRIVILEGES ON *.* TO 'root'@'%' IDENTIFIED BY '123456';
FLUSH PRIVILEGES;
```

## ğŸ”’ å®‰å…¨å»ºè®®

### 1. ä½¿ç”¨ä¸“ç”¨ç”¨æˆ·
```sql
-- åˆ›å»ºä¸“ç”¨ç”¨æˆ·
CREATE USER 'image_user'@'%' IDENTIFIED BY 'strong_password';
GRANT ALL PRIVILEGES ON image_convert_db.* TO 'image_user'@'%';
FLUSH PRIVILEGES;
```

### 2. é™åˆ¶IPè®¿é—®
```sql
-- åªå…è®¸ç‰¹å®šIPè®¿é—®
CREATE USER 'image_user'@'192.168.1.%' IDENTIFIED BY 'strong_password';
GRANT ALL PRIVILEGES ON image_convert_db.* TO 'image_user'@'192.168.1.%';
FLUSH PRIVILEGES;
```

### 3. ä½¿ç”¨SSLè¿æ¥
```python
# åœ¨config.pyä¸­æ·»åŠ SSLé…ç½®
database_url = "mysql+pymysql://root:123456@1.94.137.69:3306/image_convert_db?ssl_disabled=false"
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

### 1. è¿æ¥æ± é…ç½®
```python
# åœ¨database.pyä¸­é…ç½®è¿æ¥æ± 
engine = create_engine(
    settings.database_url,
    pool_size=20,
    max_overflow=30,
    pool_pre_ping=True,
    pool_recycle=3600
)
```

### 2. Redisè¿æ¥æ± 
```python
# åœ¨redis_client.pyä¸­é…ç½®è¿æ¥æ± 
redis_client = redis.Redis(
    host=settings.redis_host,
    port=settings.redis_port,
    db=settings.redis_database,
    password=settings.redis_password,
    max_connections=20,
    retry_on_timeout=True
)
```

## ğŸš€ éƒ¨ç½²å»ºè®®

### 1. ä½¿ç”¨ç¯å¢ƒå˜é‡
åˆ›å»º `.env` æ–‡ä»¶ï¼š
```env
DATABASE_URL=mysql+pymysql://root:123456@1.94.137.69:3306/image_convert_db
REDIS_HOST=1.94.137.69
REDIS_PORT=6379
REDIS_PASSWORD=foobared
SECRET_KEY=your-secret-key
```

### 2. ä½¿ç”¨Docker
```dockerfile
FROM python:3.9-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

EXPOSE 8000
CMD ["python", "dev_start.py"]
```

### 3. ä½¿ç”¨Nginxåå‘ä»£ç†
```nginx
server {
    listen 80;
    server_name your-domain.com;
    
    location / {
        proxy_pass http://localhost:8000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

## ğŸ“ ç›‘æ§å’Œæ—¥å¿—

### 1. å¥åº·æ£€æŸ¥
```bash
curl http://localhost:8000/health
```

### 2. æŸ¥çœ‹æ—¥å¿—
```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
tail -f logs/app.log

# æŸ¥çœ‹æ•°æ®åº“æ—¥å¿—
mysql -h 1.94.137.69 -u root -p -e "SHOW PROCESSLIST;"
```

### 3. æ€§èƒ½ç›‘æ§
```python
# åœ¨main.pyä¸­æ·»åŠ ç›‘æ§ç«¯ç‚¹
@app.get("/metrics")
async def metrics():
    return {
        "database_status": "connected",
        "redis_status": "connected",
        "uptime": "running"
    }
```

## ğŸ¯ ä¸‹ä¸€æ­¥

1. ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸
2. è¿è¡Œè¿æ¥æµ‹è¯•è„šæœ¬
3. åˆå§‹åŒ–æ•°æ®åº“
4. å¯åŠ¨æœåŠ¡
5. è®¿é—®APIæ–‡æ¡£è¿›è¡Œæµ‹è¯•

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. ç½‘ç»œè¿æ¥çŠ¶æ€
2. æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€
3. é˜²ç«å¢™è®¾ç½®
4. ç”¨æˆ·æƒé™é…ç½®
5. æ•°æ®åº“å’ŒRedisæœåŠ¡çŠ¶æ€
