# ğŸ“ åé¦ˆç•™è¨€å’Œç§¯åˆ†ç³»ç»Ÿè¯´æ˜

## ğŸ¯ åŠŸèƒ½æ¦‚è¿°

æœ¬æ¬¡æ›´æ–°ä¸ºå›¾ç‰‡å¤„ç†æœåŠ¡æ·»åŠ äº†ä¸¤ä¸ªé‡è¦åŠŸèƒ½æ¨¡å—ï¼š

1. **åé¦ˆç•™è¨€æ¨¡å—** - ç”¨æˆ·å¯ä»¥å‘ç®¡ç†å‘˜æäº¤åé¦ˆã€å»ºè®®ã€bugæŠ¥å‘Šç­‰
2. **ç§¯åˆ†ç³»ç»Ÿ** - ç”¨æˆ·é€šè¿‡ç­¾åˆ°ã€å›¾ç‰‡è½¬æ¢ã€æäº¤åé¦ˆç­‰æ´»åŠ¨è·å¾—ç§¯åˆ†

## ğŸ“‹ åŠŸèƒ½è¯¦æƒ…

### 1. åé¦ˆç•™è¨€æ¨¡å—

#### 1.1 åŠŸèƒ½ç‰¹æ€§
- âœ… ç”¨æˆ·å¯æäº¤å¤šç§ç±»å‹çš„åé¦ˆï¼ˆBugæŠ¥å‘Šã€åŠŸèƒ½å»ºè®®ã€æ”¹è¿›å»ºè®®ã€æŠ•è¯‰ç­‰ï¼‰
- âœ… æ”¯æŒä¼˜å…ˆçº§è®¾ç½®ï¼ˆä½ã€ä¸­ã€é«˜ã€ç´§æ€¥ï¼‰
- âœ… ç®¡ç†å‘˜å¯å›å¤åé¦ˆå¹¶æ›´æ–°çŠ¶æ€
- âœ… ç”¨æˆ·å¯æŸ¥çœ‹è‡ªå·±çš„åé¦ˆå†å²å’ŒçŠ¶æ€
- âœ… æ”¯æŒåé¦ˆæœç´¢å’Œç­›é€‰
- âœ… æäº¤åé¦ˆè‡ªåŠ¨è·å¾—ç§¯åˆ†å¥–åŠ±

#### 1.2 åé¦ˆåˆ†ç±»
- **BugæŠ¥å‘Š** (`bug`) - ç³»ç»Ÿé”™è¯¯ã€åŠŸèƒ½å¼‚å¸¸ç­‰
- **åŠŸèƒ½å»ºè®®** (`feature`) - æ–°åŠŸèƒ½éœ€æ±‚ã€åŠŸèƒ½æ”¹è¿›ç­‰
- **æ”¹è¿›å»ºè®®** (`suggestion`) - ç”¨æˆ·ä½“éªŒä¼˜åŒ–å»ºè®®
- **æŠ•è¯‰** (`complaint`) - æœåŠ¡æŠ•è¯‰ã€é—®é¢˜åé¦ˆ
- **å…¶ä»–** (`other`) - å…¶ä»–ç±»å‹åé¦ˆ

#### 1.3 åé¦ˆçŠ¶æ€
- **å¾…å¤„ç†** (`pending`) - æ–°æäº¤çš„åé¦ˆ
- **å¤„ç†ä¸­** (`processing`) - ç®¡ç†å‘˜æ­£åœ¨å¤„ç†
- **å·²è§£å†³** (`resolved`) - é—®é¢˜å·²è§£å†³
- **å·²å…³é—­** (`closed`) - åé¦ˆå·²å…³é—­

### 2. ç§¯åˆ†ç³»ç»Ÿ

#### 2.1 ç§¯åˆ†è·å–æ–¹å¼
- **æ¯æ—¥ç­¾åˆ°** - åŸºç¡€10ç§¯åˆ†ï¼Œè¿ç»­ç­¾åˆ°æœ‰é¢å¤–å¥–åŠ±
- **å›¾ç‰‡è½¬æ¢** - æ¯æ¬¡è½¬æ¢è·å¾—5ç§¯åˆ†
- **æäº¤åé¦ˆ** - æ¯æ¬¡æäº¤è·å¾—20ç§¯åˆ†
- **åé¦ˆè¢«é‡‡çº³** - åé¦ˆè¢«ç®¡ç†å‘˜é‡‡çº³è·å¾—100ç§¯åˆ†
- **ç®¡ç†å‘˜è°ƒæ•´** - ç®¡ç†å‘˜æ‰‹åŠ¨è°ƒæ•´ç§¯åˆ†

#### 2.2 è¿ç»­ç­¾åˆ°å¥–åŠ±
- **ç¬¬1å¤©** - 10ç§¯åˆ†
- **ç¬¬3å¤©** - 50ç§¯åˆ†
- **ç¬¬7å¤©** - 150ç§¯åˆ†
- **ç¬¬30å¤©** - 500ç§¯åˆ†

#### 2.3 ç§¯åˆ†å…‘æ¢
- **VIPå‡çº§** - ä½¿ç”¨ç§¯åˆ†å‡çº§ä¼šå‘˜ç­‰çº§
- **è½¬æ¢é¢åº¦** - å…‘æ¢é¢å¤–çš„å›¾ç‰‡è½¬æ¢æ¬¡æ•°
- **åŠŸèƒ½è§£é”** - è§£é”é«˜çº§åŠŸèƒ½
- **å…¶ä»–ç‰©å“** - è‡ªå®šä¹‰å…‘æ¢ç‰©å“

## ğŸ—„ï¸ æ•°æ®åº“è®¾è®¡

### 1. ç”¨æˆ·è¡¨æ‰©å±•
```sql
-- æ·»åŠ ç§¯åˆ†ç›¸å…³å­—æ®µ
ALTER TABLE users ADD COLUMN points INT DEFAULT 0 NOT NULL;
ALTER TABLE users ADD COLUMN last_checkin_date DATE NULL;
ALTER TABLE users ADD COLUMN consecutive_checkin_days INT DEFAULT 0 NOT NULL;
ALTER TABLE users ADD COLUMN total_checkin_days INT DEFAULT 0 NOT NULL;
```

### 2. åé¦ˆç•™è¨€è¡¨
```sql
CREATE TABLE feedbacks (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    title VARCHAR(200) NOT NULL,
    content TEXT NOT NULL,
    category ENUM('bug', 'feature', 'suggestion', 'complaint', 'other'),
    status ENUM('pending', 'processing', 'resolved', 'closed'),
    priority ENUM('low', 'medium', 'high', 'urgent'),
    admin_reply TEXT NULL,
    admin_reply_time TIMESTAMP NULL,
    admin_user_id INT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
);
```

### 3. ç§¯åˆ†è®°å½•è¡¨
```sql
CREATE TABLE point_records (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    points INT NOT NULL,
    type ENUM('earn', 'spend', 'expire', 'admin_adjust'),
    source ENUM('checkin', 'conversion', 'feedback', 'admin', 'exchange', 'other'),
    description VARCHAR(500) NOT NULL,
    related_id INT NULL,
    related_type VARCHAR(50) NULL,
    expires_at TIMESTAMP NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 4. ç­¾åˆ°è®°å½•è¡¨
```sql
CREATE TABLE checkin_records (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    checkin_date DATE NOT NULL,
    points_earned INT NOT NULL,
    consecutive_days INT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

## ğŸš€ APIæ¥å£

### 1. åé¦ˆç•™è¨€æ¥å£

#### åˆ›å»ºåé¦ˆ
```http
POST /api/feedback/create
Content-Type: application/json
Authorization: Bearer <token>

{
    "title": "åŠŸèƒ½å»ºè®®",
    "content": "å¸Œæœ›èƒ½æ”¯æŒæ›´å¤šå›¾ç‰‡æ ¼å¼",
    "category": "feature",
    "priority": "medium"
}
```

#### è·å–åé¦ˆåˆ—è¡¨
```http
GET /api/feedback/list?limit=10&offset=0&status=pending&category=feature
Authorization: Bearer <token>
```

#### è·å–åé¦ˆè¯¦æƒ…
```http
GET /api/feedback/{feedback_id}
Authorization: Bearer <token>
```

#### æ›´æ–°åé¦ˆ
```http
PUT /api/feedback/{feedback_id}
Content-Type: application/json
Authorization: Bearer <token>

{
    "title": "æ›´æ–°åçš„æ ‡é¢˜",
    "priority": "high"
}
```

#### åˆ é™¤åé¦ˆ
```http
DELETE /api/feedback/{feedback_id}
Authorization: Bearer <token>
```

### 2. ç§¯åˆ†ç³»ç»Ÿæ¥å£

#### ç”¨æˆ·ç­¾åˆ°
```http
POST /api/points/checkin
Authorization: Bearer <token>
```

#### è·å–ç§¯åˆ†æ‘˜è¦
```http
GET /api/points/summary
Authorization: Bearer <token>
```

#### è·å–ç§¯åˆ†è®°å½•
```http
GET /api/points/records?limit=20&offset=0&type=earn&source=checkin
Authorization: Bearer <token>
```

#### è·å–ç­¾åˆ°è®°å½•
```http
GET /api/points/checkin/records?limit=30&offset=0
Authorization: Bearer <token>
```

#### ç§¯åˆ†å…‘æ¢
```http
POST /api/points/exchange
Content-Type: application/json
Authorization: Bearer <token>

{
    "item_name": "VIPå‡çº§",
    "item_type": "vip_upgrade",
    "points_cost": 1000,
    "item_value": "å‡çº§åˆ°VIPä¼šå‘˜"
}
```

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### 1. è¿è¡Œæ•°æ®åº“è¿ç§»
```bash
# æ‰§è¡Œæ•°æ®åº“è¿ç§»è„šæœ¬
mysql -u root -p image_convert_db < database_feedback_points_migration.sql
```

### 2. å¯åŠ¨æœåŠ¡
```bash
python main.py
```

### 3. è¿è¡Œæµ‹è¯•è„šæœ¬
```bash
python test_feedback_points.py
```

## ğŸ“Š åŠŸèƒ½ä¼˜åŠ¿

### 1. ç”¨æˆ·å‚ä¸åº¦æå‡
- é€šè¿‡ç§¯åˆ†ç³»ç»Ÿæ¿€åŠ±ç”¨æˆ·æ´»è·ƒä½¿ç”¨
- è¿ç»­ç­¾åˆ°æœºåˆ¶å¢åŠ ç”¨æˆ·ç²˜æ€§
- åé¦ˆç³»ç»Ÿè®©ç”¨æˆ·å‚ä¸äº§å“æ”¹è¿›

### 2. äº§å“æ”¹è¿›
- æ”¶é›†ç”¨æˆ·çœŸå®åé¦ˆå’Œå»ºè®®
- å¿«é€Ÿå“åº”å’Œè§£å†³ç”¨æˆ·é—®é¢˜
- æ•°æ®é©±åŠ¨çš„äº§å“ä¼˜åŒ–

### 3. ç”¨æˆ·ç•™å­˜
- ç§¯åˆ†å¥–åŠ±æœºåˆ¶å¢åŠ ç”¨æˆ·ä»·å€¼æ„Ÿ
- è¿ç»­ç­¾åˆ°åŸ¹å…»ç”¨æˆ·ä¹ æƒ¯
- åé¦ˆè¢«é‡‡çº³æå‡ç”¨æˆ·æ»¡æ„åº¦

### 4. è¿è¥æ•°æ®
- ç”¨æˆ·æ´»è·ƒåº¦ç»Ÿè®¡
- åé¦ˆé—®é¢˜åˆ†ç±»ç»Ÿè®¡
- ç§¯åˆ†ä½¿ç”¨æƒ…å†µåˆ†æ

## ğŸ”§ é…ç½®è¯´æ˜

### 1. ç§¯åˆ†è§„åˆ™é…ç½®
åœ¨ `point_rules` è¡¨ä¸­å¯ä»¥é…ç½®ä¸åŒçš„ç§¯åˆ†è§„åˆ™ï¼š
- ç­¾åˆ°å¥–åŠ±è§„åˆ™
- è½¬æ¢å¥–åŠ±è§„åˆ™
- åé¦ˆå¥–åŠ±è§„åˆ™

### 2. å…‘æ¢ç‰©å“é…ç½®
åœ¨ `point_exchanges` è¡¨ä¸­å¯ä»¥é…ç½®å¯å…‘æ¢çš„ç‰©å“ï¼š
- VIPå‡çº§
- è½¬æ¢é¢åº¦
- åŠŸèƒ½è§£é”
- è‡ªå®šä¹‰ç‰©å“

### 3. æƒé™æ§åˆ¶
- æ™®é€šç”¨æˆ·ï¼šåªèƒ½ç®¡ç†è‡ªå·±çš„åé¦ˆå’Œç§¯åˆ†
- ç®¡ç†å‘˜ï¼šå¯ä»¥å›å¤åé¦ˆã€å®¡æ‰¹å…‘æ¢ã€è°ƒæ•´ç§¯åˆ†

## ğŸ“ˆ åç»­æ‰©å±•

### 1. ç§¯åˆ†å•†åŸ
- æ›´å¤šå…‘æ¢ç‰©å“
- é™æ—¶å…‘æ¢æ´»åŠ¨
- ç§¯åˆ†æ’è¡Œæ¦œ

### 2. åé¦ˆç³»ç»Ÿå¢å¼º
- åé¦ˆåˆ†ç±»æ ‡ç­¾
- åé¦ˆä¼˜å…ˆçº§è‡ªåŠ¨è°ƒæ•´
- åé¦ˆå¤„ç†æ—¶é—´ç»Ÿè®¡

### 3. ç”¨æˆ·ç­‰çº§ç³»ç»Ÿ
- åŸºäºç§¯åˆ†çš„ç”¨æˆ·ç­‰çº§
- ä¸åŒç­‰çº§çš„ç‰¹æƒ
- ç­‰çº§å‡çº§å¥–åŠ±

### 4. æ•°æ®åˆ†æ
- ç”¨æˆ·è¡Œä¸ºåˆ†æ
- ç§¯åˆ†ä½¿ç”¨è¶‹åŠ¿
- åé¦ˆé—®é¢˜çƒ­åŠ›å›¾

è¿™ä¸ªåé¦ˆç•™è¨€å’Œç§¯åˆ†ç³»ç»Ÿå°†å¤§å¤§æå‡ç”¨æˆ·ä½“éªŒå’Œäº§å“ä»·å€¼ï¼Œè®©ç”¨æˆ·æ›´ç§¯æåœ°å‚ä¸äº§å“æ”¹è¿›å’Œä½¿ç”¨æœåŠ¡ï¼
