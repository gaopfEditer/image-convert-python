# ğŸ“ é¡¹ç›®ç»“æ„æ€»è§ˆ

## ğŸ¯ é‡ç»„åçš„ç›®å½•ç»“æ„

```
image-convert-python/
â”œâ”€â”€ ğŸ“ framework/                 # HTTPæ¡†æ¶å±‚ (å¯æ›¿æ¢)
â”‚   â”œâ”€â”€ fastapi_app.py           # FastAPIåº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ middleware/              # ä¸­é—´ä»¶
â”‚   â”‚   â”œâ”€â”€ auth.py             # è®¤è¯ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ logging.py          # æ—¥å¿—ä¸­é—´ä»¶
â”‚   â”œâ”€â”€ routes/                  # è·¯ç”±å±‚
â”‚   â”‚   â”œâ”€â”€ auth.py             # è®¤è¯è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ image.py            # å›¾ç‰‡å¤„ç†è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ payment.py          # æ”¯ä»˜è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ wechat.py           # å¾®ä¿¡è·¯ç”±
â”‚   â”‚   â”œâ”€â”€ feedback.py         # åé¦ˆç•™è¨€è·¯ç”±
â”‚   â”‚   â””â”€â”€ points.py           # ç§¯åˆ†ç³»ç»Ÿè·¯ç”±
â”‚   â””â”€â”€ schemas/                 # APIæ¨¡å‹
â”‚       â”œâ”€â”€ auth.py             # è®¤è¯æ¨¡å‹
â”‚       â”œâ”€â”€ image.py            # å›¾ç‰‡æ¨¡å‹
â”‚       â”œâ”€â”€ payment.py          # æ”¯ä»˜æ¨¡å‹
â”‚       â”œâ”€â”€ feedback.py         # åé¦ˆæ¨¡å‹
â”‚       â””â”€â”€ points.py           # ç§¯åˆ†æ¨¡å‹
â”œâ”€â”€ ğŸ“ business/                 # æ ¸å¿ƒä¸šåŠ¡å±‚ (ä¸å¯æ›¿æ¢)
â”‚   â”œâ”€â”€ image_conversion/        # å›¾ç‰‡è½¬æ¢ä¸šåŠ¡
â”‚   â”‚   â””â”€â”€ service.py          # å›¾ç‰‡è½¬æ¢æœåŠ¡
â”‚   â”œâ”€â”€ user_management/         # ç”¨æˆ·ç®¡ç†ä¸šåŠ¡
â”‚   â”‚   â””â”€â”€ service.py          # ç”¨æˆ·ç®¡ç†æœåŠ¡
â”‚   â”œâ”€â”€ payment/                 # æ”¯ä»˜ä¸šåŠ¡
â”‚   â”‚   â””â”€â”€ service.py          # æ”¯ä»˜æœåŠ¡
â”‚   â”œâ”€â”€ permission/              # æƒé™ç®¡ç†ä¸šåŠ¡
â”‚   â”‚   â””â”€â”€ service.py          # æƒé™æœåŠ¡
â”‚   â”œâ”€â”€ feedback/                # åé¦ˆç•™è¨€ä¸šåŠ¡
â”‚   â”‚   â””â”€â”€ service.py          # åé¦ˆæœåŠ¡
â”‚   â””â”€â”€ points/                  # ç§¯åˆ†ç³»ç»Ÿä¸šåŠ¡
â”‚       â””â”€â”€ service.py          # ç§¯åˆ†æœåŠ¡
â”œâ”€â”€ ğŸ“ tool/                     # å·¥å…·å±‚ (å¯å¤ç”¨)
â”‚   â”œâ”€â”€ image/                   # å›¾ç‰‡å¤„ç†å·¥å…·
â”‚   â”‚   â””â”€â”€ processor.py        # å›¾ç‰‡å¤„ç†å™¨
â”‚   â”œâ”€â”€ file/                    # æ–‡ä»¶æ“ä½œå·¥å…·
â”‚   â”‚   â””â”€â”€ manager.py          # æ–‡ä»¶ç®¡ç†å™¨
â”‚   â”œâ”€â”€ crypto/                  # åŠ å¯†å·¥å…·
â”‚   â”‚   â””â”€â”€ jwt.py              # JWTå·¥å…·
â”‚   â””â”€â”€ utils/                   # é€šç”¨å·¥å…·
â”‚       â””â”€â”€ logger.py           # æ—¥å¿—å·¥å…·
â”œâ”€â”€ ğŸ“ infra/                    # åŸºç¡€è®¾æ–½å±‚ (å¯æ’æ‹”)
â”‚   â”œâ”€â”€ database/                # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ connection.py       # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ models.py           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ repositories/       # æ•°æ®è®¿é—®å±‚
â”‚   â”œâ”€â”€ cache/                   # ç¼“å­˜
â”‚   â”‚   â””â”€â”€ cache_service.py    # ç¼“å­˜æœåŠ¡
â”‚   â”œâ”€â”€ storage/                 # å­˜å‚¨
â”‚   â”‚   â””â”€â”€ storage_service.py  # å­˜å‚¨æœåŠ¡
â”‚   â””â”€â”€ external/                # å¤–éƒ¨æœåŠ¡
â”‚       â””â”€â”€ wechat_client.py    # å¾®ä¿¡å®¢æˆ·ç«¯
â”œâ”€â”€ ğŸ“ domain/                   # é¢†åŸŸå±‚ (DDD)
â”‚   â”œâ”€â”€ entities/                # å®ä½“
â”‚   â”‚   â”œâ”€â”€ user.py             # ç”¨æˆ·å®ä½“
â”‚   â”‚   â”œâ”€â”€ image.py            # å›¾ç‰‡å®ä½“
â”‚   â”‚   â”œâ”€â”€ conversion.py       # è½¬æ¢å®ä½“
â”‚   â”‚   â”œâ”€â”€ feedback.py         # åé¦ˆå®ä½“
â”‚   â”‚   â””â”€â”€ points.py           # ç§¯åˆ†å®ä½“
â”‚   â”œâ”€â”€ value_objects/           # å€¼å¯¹è±¡
â”‚   â”‚   â””â”€â”€ file_info.py        # æ–‡ä»¶ä¿¡æ¯
â”‚   â”œâ”€â”€ services/                # é¢†åŸŸæœåŠ¡
â”‚   â”‚   â””â”€â”€ image_processing.py # å›¾ç‰‡å¤„ç†æœåŠ¡
â”‚   â””â”€â”€ repositories/            # ä»“å‚¨æ¥å£
â”‚       â””â”€â”€ user_repository.py  # ç”¨æˆ·ä»“å‚¨æ¥å£
â”œâ”€â”€ ğŸ“ types/                    # ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ common.py               # é€šç”¨ç±»å‹
â”‚   â”œâ”€â”€ image.py                # å›¾ç‰‡ç±»å‹
â”‚   â”œâ”€â”€ user.py                 # ç”¨æˆ·ç±»å‹
â”‚   â””â”€â”€ api.py                  # APIç±»å‹
â”œâ”€â”€ ğŸ“ config/                   # é…ç½®
â”‚   â”œâ”€â”€ settings.py             # é…ç½®è®¾ç½®
â”‚   â”œâ”€â”€ database.py             # æ•°æ®åº“é…ç½®
â”‚   â””â”€â”€ redis.py                # Redisé…ç½®
â”œâ”€â”€ ğŸ“ docs/                     # æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/           # æ¶æ„æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ é¡¹ç›®æ¶æ„é‡æ„æ–¹æ¡ˆ.md
â”‚   â”‚   â”œâ”€â”€ README_æ–°æ¶æ„.md
â”‚   â”‚   â””â”€â”€ é¡¹ç›®ç»“æ„æ€»è§ˆ.md
â”‚   â”œâ”€â”€ features/               # åŠŸèƒ½æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ åé¦ˆç•™è¨€å’Œç§¯åˆ†ç³»ç»Ÿè¯´æ˜.md
â”‚   â”‚   â”œâ”€â”€ å›¾ç‰‡å¤„ç†è®°å½•ç³»ç»Ÿè®¾è®¡.md
â”‚   â”‚   â””â”€â”€ å¢å¼ºå›¾ç‰‡å¤„ç†ç³»ç»Ÿè¯´æ˜.md
â”‚   â”œâ”€â”€ deployment/             # éƒ¨ç½²æ–‡æ¡£
â”‚   â”‚   â”œâ”€â”€ mysql_setup.md
â”‚   â”‚   â”œâ”€â”€ quick_start.md
â”‚   â”‚   â”œâ”€â”€ å¾®ä¿¡æ”¯ä»˜é…ç½®è¯´æ˜.md
â”‚   â”‚   â”œâ”€â”€ å¾®ä¿¡ç™»å½•é…ç½®è¯´æ˜.md
â”‚   â”‚   â””â”€â”€ è¿œç¨‹æœåŠ¡å™¨é…ç½®.md
â”‚   â””â”€â”€ api/                    # APIæ–‡æ¡£
â”œâ”€â”€ ğŸ“ tests/                    # æµ‹è¯•
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”œâ”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_connection.py
â”‚   â”‚   â”œâ”€â”€ test_feedback_points.py
â”‚   â”‚   â”œâ”€â”€ test_enhanced_features.py
â”‚   â”‚   â”œâ”€â”€ test_image_processing.py
â”‚   â”‚   â””â”€â”€ redis_test.py
â”‚   â””â”€â”€ e2e/                    # ç«¯åˆ°ç«¯æµ‹è¯•
â”‚       â””â”€â”€ test_wechat_login.html
â”œâ”€â”€ ğŸ“ tools/                    # å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ database/               # æ•°æ®åº“å·¥å…·
â”‚   â”‚   â”œâ”€â”€ database.py
â”‚   â”‚   â”œâ”€â”€ database_init.sql
â”‚   â”‚   â”œâ”€â”€ database_init_mysql.sql
â”‚   â”‚   â”œâ”€â”€ database_feedback_points_migration.sql
â”‚   â”‚   â”œâ”€â”€ database_migration.sql
â”‚   â”‚   â””â”€â”€ init_db.py
â”‚   â”œâ”€â”€ cache/                  # ç¼“å­˜å·¥å…·
â”‚   â”‚   â””â”€â”€ redis_client.py
â”‚   â””â”€â”€ scripts/                # éƒ¨ç½²è„šæœ¬
â”‚       â”œâ”€â”€ create_new_structure.py
â”‚       â”œâ”€â”€ migrate_to_new_structure.py
â”‚       â”œâ”€â”€ reorganize_project.py
â”‚       â”œâ”€â”€ dev_start.py
â”‚       â”œâ”€â”€ mysql_start.py
â”‚       â”œâ”€â”€ remote_start.py
â”‚       â”œâ”€â”€ run_local.py
â”‚       â””â”€â”€ start.py
â”œâ”€â”€ ğŸ“ uploads/                  # ä¸Šä¼ æ–‡ä»¶
â”‚   â”œâ”€â”€ uploads/                # åŸå§‹æ–‡ä»¶
â”‚   â”œâ”€â”€ converted/              # è½¬æ¢åæ–‡ä»¶
â”‚   â””â”€â”€ temp/                   # ä¸´æ—¶æ–‡ä»¶
â”œâ”€â”€ main.py                     # åº”ç”¨å…¥å£
â”œâ”€â”€ requirements.txt            # ä¾èµ–
â””â”€â”€ README.md                   # é¡¹ç›®è¯´æ˜
```

## ğŸ¯ åˆ†å±‚èŒè´£

### 1. Framework Layer (æ¡†æ¶å±‚)
**èŒè´£**: HTTPæ¡†æ¶ç»†èŠ‚å¤„ç†
**ç‰¹ç‚¹**: å¯æ›¿æ¢ï¼Œæ¡†æ¶æ— å…³
**åŒ…å«**:
- FastAPIåº”ç”¨é…ç½®
- ä¸­é—´ä»¶ (CORS, è®¤è¯, æ—¥å¿—)
- è·¯ç”±å®šä¹‰
- APIæ¨¡å‹å®šä¹‰

### 2. Business Layer (ä¸šåŠ¡å±‚)
**èŒè´£**: æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
**ç‰¹ç‚¹**: ä¸å¯æ›¿æ¢ï¼Œä¸šåŠ¡æ ¸å¿ƒ
**åŒ…å«**:
- å›¾ç‰‡è½¬æ¢ä¸šåŠ¡æµç¨‹
- ç”¨æˆ·ç®¡ç†ä¸šåŠ¡
- æ”¯ä»˜ä¸šåŠ¡é€»è¾‘
- æƒé™ç®¡ç†
- åé¦ˆç•™è¨€ä¸šåŠ¡
- ç§¯åˆ†ç³»ç»Ÿä¸šåŠ¡

### 3. Tool Layer (å·¥å…·å±‚)
**èŒè´£**: æ— çŠ¶æ€å·¥å…·å‡½æ•°
**ç‰¹ç‚¹**: å¯å¤ç”¨ã€å¯æµ‹è¯•
**åŒ…å«**:
- å›¾ç‰‡å¤„ç†å·¥å…· (PILå°è£…)
- æ–‡ä»¶æ“ä½œå·¥å…·
- åŠ å¯†å·¥å…·
- é€šç”¨å·¥å…·å‡½æ•°

### 4. Infra Layer (åŸºç¡€è®¾æ–½å±‚)
**èŒè´£**: å¤–éƒ¨æœåŠ¡é€‚é…
**ç‰¹ç‚¹**: å¯æ’æ‹”ï¼Œæ¢äº‘å‚å•†ä¸å½±å“ä¸šåŠ¡
**åŒ…å«**:
- æ•°æ®åº“è¿æ¥å’Œæ“ä½œ
- ç¼“å­˜æœåŠ¡
- å­˜å‚¨æœåŠ¡
- å¤–éƒ¨APIå®¢æˆ·ç«¯

### 5. Domain Layer (é¢†åŸŸå±‚)
**èŒè´£**: ä¸šåŠ¡å®ä½“å’Œè§„åˆ™
**ç‰¹ç‚¹**: é¢†åŸŸé©±åŠ¨è®¾è®¡
**åŒ…å«**:
- ä¸šåŠ¡å®ä½“
- å€¼å¯¹è±¡
- é¢†åŸŸæœåŠ¡
- ä»“å‚¨æ¥å£

### 6. Types Layer (ç±»å‹å±‚)
**èŒè´£**: å…¨å±€ç±»å‹å®šä¹‰
**ç‰¹ç‚¹**: ç±»å‹å®‰å…¨
**åŒ…å«**:
- é€šç”¨ç±»å‹å®šä¹‰
- ä¸šåŠ¡ç±»å‹å®šä¹‰
- APIç±»å‹å®šä¹‰

## ğŸ“ ç›®å½•è¯´æ˜

### docs/ - æ–‡æ¡£ç›®å½•
- **architecture/** - æ¶æ„è®¾è®¡æ–‡æ¡£
- **features/** - åŠŸèƒ½è¯´æ˜æ–‡æ¡£
- **deployment/** - éƒ¨ç½²æŒ‡å—æ–‡æ¡£
- **api/** - APIæ¥å£æ–‡æ¡£

### tests/ - æµ‹è¯•ç›®å½•
- **unit/** - å•å…ƒæµ‹è¯•
- **integration/** - é›†æˆæµ‹è¯•
- **e2e/** - ç«¯åˆ°ç«¯æµ‹è¯•

### tools/ - å·¥å…·ç›®å½•
- **database/** - æ•°æ®åº“ç›¸å…³å·¥å…·å’Œè„šæœ¬
- **cache/** - ç¼“å­˜ç›¸å…³å·¥å…·
- **scripts/** - éƒ¨ç½²å’Œå¼€å‘è„šæœ¬

## ğŸ”„ ä¾èµ–å…³ç³»

```
Framework Layer
    â†“ ä¾èµ–
Business Layer
    â†“ ä¾èµ–
Domain Layer
    â†‘ å®ç°
Infra Layer
    â†‘ ä½¿ç”¨
Tool Layer
```

## ğŸ¯ é‡ç»„ä¼˜åŠ¿

1. **æ¸…æ™°åˆ†å±‚** - æ¯å±‚èŒè´£æ˜ç¡®ï¼Œæ˜“äºç†è§£
2. **é«˜å†…èš** - ç›¸å…³åŠŸèƒ½èšåˆåœ¨ä¸€èµ·
3. **ä½è€¦åˆ** - å±‚é—´ä¾èµ–æ¸…æ™°ï¼Œæ˜“äºæ›¿æ¢
4. **å¯æµ‹è¯•** - æ¯å±‚éƒ½å¯ä»¥ç‹¬ç«‹æµ‹è¯•
5. **å¯æ‰©å±•** - æ–°åŠŸèƒ½å¯ä»¥æŒ‰å±‚æ·»åŠ 
6. **å¯ç»´æŠ¤** - ä¿®æ”¹å½±å“èŒƒå›´å¯æ§
7. **å¯å¤ç”¨** - å·¥å…·å±‚å’Œé¢†åŸŸå±‚å¯å¤ç”¨
8. **æ–‡æ¡£åŒ–** - æ‰€æœ‰æ–‡æ¡£é›†ä¸­ç®¡ç†
9. **æµ‹è¯•åŒ–** - æ‰€æœ‰æµ‹è¯•é›†ä¸­ç®¡ç†
10. **å·¥å…·åŒ–** - æ‰€æœ‰å·¥å…·è„šæœ¬é›†ä¸­ç®¡ç†

è¿™ä¸ªé‡ç»„åçš„é¡¹ç›®ç»“æ„æ›´åŠ æ¸…æ™°ã€ä¸“ä¸šå’Œæ˜“äºç»´æŠ¤ï¼
