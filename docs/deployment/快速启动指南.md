# 🚀 快速启动指南

## 📋 环境要求

- Python 3.8+
- MySQL 5.7+
- Redis 6.0+

## 🔧 安装步骤

### 1. 克隆项目
```bash
git clone <repository-url>
cd image-convert-python
```

### 2. 安装依赖
```bash
pip install -r requirements.txt
```

### 3. 配置数据库
```bash
# 创建数据库
mysql -u root -p -e "CREATE DATABASE image_convert_db CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;"

# 执行数据库初始化
mysql -u root -p image_convert_db < tools/database/database_init_mysql.sql

# 执行功能迁移
mysql -u root -p image_convert_db < tools/database/database_feedback_points_migration.sql
```

### 4. 配置环境变量
```bash
# 复制配置文件
cp config/settings.py.example config/settings.py

# 编辑配置文件
vim config/settings.py
```

### 5. 启动服务
```bash
# 方式1: 直接启动
python main.py

# 方式2: 使用脚本启动
python tools/scripts/dev_start.py

# 方式3: 使用uvicorn启动
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```

## 🌐 访问服务

- **API文档**: http://localhost:8000/docs
- **ReDoc文档**: http://localhost:8000/redoc
- **健康检查**: http://localhost:8000/health
- **根路径**: http://localhost:8000/

## 🧪 测试功能

### 1. 运行集成测试
```bash
# 运行所有集成测试
python -m pytest tests/integration/

# 运行特定测试
python tests/integration/test_feedback_points.py
python tests/integration/test_connection.py
```

### 2. 手动测试API
```bash
# 测试登录
curl -X POST "http://localhost:8000/api/auth/login" \
     -H "Content-Type: application/json" \
     -d '{"username": "admin", "password": "admin666"}'

# 测试健康检查
curl -X GET "http://localhost:8000/health"
```

## 📊 默认账户

- **管理员账户**: admin / admin666
- **测试账户**: testuser / testuser

## 🔧 常用命令

### 数据库操作
```bash
# 重置数据库
mysql -u root -p image_convert_db < tools/database/database_init_mysql.sql

# 执行迁移
mysql -u root -p image_convert_db < tools/database/database_feedback_points_migration.sql

# 备份数据库
mysqldump -u root -p image_convert_db > backup.sql
```

### 服务管理
```bash
# 启动开发服务
python tools/scripts/dev_start.py

# 启动生产服务
python tools/scripts/start.py

# 启动MySQL服务
python tools/scripts/mysql_start.py
```

### 测试相关
```bash
# 运行所有测试
python -m pytest tests/

# 运行单元测试
python -m pytest tests/unit/

# 运行集成测试
python -m pytest tests/integration/

# 运行端到端测试
python -m pytest tests/e2e/
```

## 🐛 常见问题

### 1. 数据库连接失败
- 检查MySQL服务是否启动
- 检查数据库配置是否正确
- 检查网络连接

### 2. Redis连接失败
- 检查Redis服务是否启动
- 检查Redis配置是否正确
- 检查防火墙设置

### 3. 端口被占用
```bash
# 查看端口占用
netstat -ano | findstr :8000

# 杀死进程
taskkill /F /PID <进程ID>
```

### 4. 依赖安装失败
```bash
# 升级pip
python -m pip install --upgrade pip

# 使用国内镜像
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/
```

## 📚 更多文档

- [架构设计](docs/architecture/)
- [功能说明](docs/features/)
- [API文档](http://localhost:8000/docs)
- [部署指南](docs/deployment/)

## 🤝 获取帮助

如果遇到问题，请查看：
1. 项目文档
2. API文档
3. 测试用例
4. 日志文件

祝使用愉快！🎉
